@model Feedback_Application.Areas.Admin.Pages.Shared.AdminPanelModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@{
    var user = await UserManager.GetUserAsync(User);
    var isAdmin = user != null && await UserManager.IsInRoleAsync(user, "Admin");
}

@if (isAdmin)
{
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-primary text-white d-flex align-items-center">
            <i class="bi bi-tools fs-4 me-2"></i>
            <span>Admin-Einstellungen</span>
        </div>
        <div class="card-body">
            <p class="text-muted">Hier kannst du wichtige Einstellungen für das System verwalten.</p>

            <form method="post" asp-page="/Identity/Account/Manage/Index" asp-page-handler="AdminPanel">
                <div class="mb-3">
                    <label for="teacherCode" class="form-label">
                        <i class="bi bi-key"></i> Lehrer-Registrierungscode
                    </label>
                    <input type="text" class="form-control" id="teacherCode" name="TeacherCode" value="@Model.TeacherCode" />
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-save"></i> Speichern
                </button>
            </form>
        </div>
    </div>
}
