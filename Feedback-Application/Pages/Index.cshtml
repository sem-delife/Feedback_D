@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selection Side</title>
    <link rel="stylesheet" href="~/css/LoginAndCode.css" />
</head>

<body class="body-Start">
    <div class="context-container">
        <a href="Identity/Account/Login" class="card login">
            <div class="icon">🔒</div>
            Login
        </a>
        <a class="card code_eingabe">
            <div class="icon">⌨️</div>
            Code eingeben
            <input type="text" id="codeInput" name="codeInput" required />

        </a>
    </div>
</body>
</html>
<div class="text-center">
    <h1 class="display-4">Welcome USER</h1>
</div>

<!-- Button zum Öffnen des Modals -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#multiStepModal">
    Open Multi-Step Modal
</button>

<!-- Multi-Step Modal -->
<div class="modal fade" id="multiStepModal" tabindex="-1" aria-labelledby="multiStepModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="multiStepModalLabel">Multi-Step Modal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Formularauswahl -->
                <div id="step1" class="modal-step">
                    <h4>Choose a Form</h4>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="formSelection" id="form1" value="Form 1">
                        <label class="form-check-label" for="form1">Form 1</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="formSelection" id="form2" value="Form 2">
                        <label class="form-check-label" for="form2">Form 2</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="formSelection" id="form3" value="Form 3">
                        <label class="form-check-label" for="form3">Form 3</label>
                    </div>
                </div>

                <!-- Step 2: Checkbox-Einstellungen -->
                <div id="step2" class="modal-step d-none">
                    <h4>Settings</h4>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="setting1">
                        <label class="form-check-label" for="setting1">Enable Option 1</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="setting2">
                        <label class="form-check-label" for="setting2">Enable Option 2</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="setting3">
                        <label class="form-check-label" for="setting3">Enable Option 3</label>
                    </div>
                </div>

                <!-- Step 3: Code-Anzeige -->
                <div id="step3" class="modal-step d-none">
                    <h4>Your Generated Code</h4>
                    <p id="generatedCode" class="fs-4 fw-bold text-center">HG585</p>
                </div>
            </div>
            <div class="modal-footer">
                <!-- Zurück-Button -->
                <button type="button" id="prevBtn" class="btn btn-secondary d-none">Back</button>
                <!-- Weiter-Button -->
                <button type="button" id="nextBtn" class="btn btn-primary">Next</button>
                <!-- Schließen-Button -->
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const steps = document.querySelectorAll('.modal-step'); // Alle Schritte
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        let currentStep = 0; // Start bei Schritt 0

        // Funktion zum Aktualisieren der Sichtbarkeit der Schritte
        function updateStep() {
            steps.forEach((step, index) => {
                step.classList.toggle('d-none', index !== currentStep);
            });

            // Back-Button nur sichtbar machen, wenn nicht am ersten Schritt
            prevBtn.classList.toggle('d-none', currentStep === 0);
            // Next-Button-Text ändern, wenn am letzten Schritt
            nextBtn.textContent = currentStep === steps.length - 1 ? 'Finish' : 'Next';
        }

        // Weiter-Button
        nextBtn.addEventListener('click', () => {
            if (currentStep < steps.length - 1) {
                currentStep++;
                updateStep();
            } else {
                // Schließe das Modal nach "Finish"
                const modal = document.getElementById('multiStepModal');
                const bootstrapModal = bootstrap.Modal.getInstance(modal);
                bootstrapModal.hide();
            }
        });

        // Zurück-Button
        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                updateStep();
            }
        });

        // Initiale Sichtbarkeit setzen
        updateStep();
    });

</script>